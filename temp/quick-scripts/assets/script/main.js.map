{"version":3,"sources":["main.js"],"names":["cc","Class","extends","Component","properties","play_btn","Node","share_btn","display","Sprite","onLoad","self","on","event","director","loadScene","console","log","canvas","game","width","winSize","toTempFilePath","x","y","height","destWidth","destHeight","success","res","wx","shareAppMessage","title","imageUrl","tempFilePath","start","CC_WECHATGAME","window","showShareMenu","withShareTicket","tex","Texture2D","sharedCanvas","_updateSubDomainCanvas","undefined","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL;AAERC,mBAAWP,GAAGM,IAFN;AAGRE,iBAASR,GAAGS;AAHJ,KAHP;;AASL;;AAEAC,UAXK,oBAWK;AACN,YAAIC,OAAO,IAAX;AACAA,aAAKN,QAAL,CAAcO,EAAd,CAAiB,UAAjB,EAA6B,UAASC,KAAT,EAAgB;AACzCb,eAAGc,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,SAFD;AAGAJ,aAAKJ,SAAL,CAAeK,EAAf,CAAkB,UAAlB,EAA8B,YAAU;AACpCI,oBAAQC,GAAR,CAAa,oBAAb;AACA;AACA,gBAAIC,SAASlB,GAAGmB,IAAH,CAAQD,MAArB;AACA,gBAAIE,QAASpB,GAAGqB,OAAH,CAAWD,KAAxB;AACA;AACAF,mBAAOI,cAAP,CAAsB;AAClBC,mBAAG,CADe;AAElBC,mBAAG,CAFe;AAGlBJ,uBAAOA,KAHW;AAIlBK,wBAAQ,GAJU;AAKlBC,2BAAW,GALO;AAMlBC,4BAAY,GANM;AAOlBC,uBAPkB,mBAOTC,GAPS,EAOJ;AACVb,4BAAQC,GAAR,CAAYY,GAAZ;AACAC,uBAAGC,eAAH,CAAmB;AACfC,+BAAO,2BADQ;AAEfC,kCAAUJ,IAAIK;AAFC,qBAAnB;AAIH;AAbiB,aAAtB;AAeH,SArBD;AAsBH,KAtCI;AAwCLC,SAxCK,mBAwCI;AACL,YAAIC,aAAJ,EAAmB;AACfC,mBAAOP,EAAP,CAAUQ,aAAV,CAAwB,EAACC,iBAAiB,IAAlB,EAAxB;AACA,iBAAKC,GAAL,GAAW,IAAIxC,GAAGyC,SAAP,EAAX;AACAJ,mBAAOK,YAAP,CAAoBtB,KAApB,GAA4B,GAA5B;AACAiB,mBAAOK,YAAP,CAAoBjB,MAApB,GAA6B,IAA7B;AAEH;AACJ,KAhDI;AAkDLkB,0BAlDK,oCAkDqB;;AAEtB,YAAIN,OAAOK,YAAP,IAAuBE,SAA3B,EAAsC;AAClC,iBAAKJ,GAAL,CAASK,eAAT,CAAyBR,OAAOK,YAAhC;AACA,iBAAKF,GAAL,CAASM,mBAAT;AACA,iBAAKtC,OAAL,CAAauC,WAAb,GAA2B,IAAI/C,GAAGgD,WAAP,CAAmB,KAAKR,GAAxB,CAA3B;AACH;AACJ,KAzDI;AA2DLS,UA3DK,kBA2DGC,EA3DH,EA2DO;AACR,aAAKP,sBAAL,CAA4BO,EAA5B;AACH;AA7DI,CAAT","file":"main.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        play_btn: cc.Node,\r\n        share_btn: cc.Node,\r\n        display: cc.Sprite,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        var self = this;\r\n        self.play_btn.on(\"touchend\", function(event) {\r\n            cc.director.loadScene(\"game\");\r\n        });\r\n        self.share_btn.on(\"touchend\", function(){\r\n            console.log (\"click share button\"); \r\n            // actively pull up the sharing interface \r\n            var canvas = cc.game.canvas;\r\n            var width  = cc.winSize.width;\r\n            // var height  = cc.winSize.height;\r\n            canvas.toTempFilePath({\r\n                x: 0,\r\n                y: 0,\r\n                width: width,\r\n                height: 400,\r\n                destWidth: 500,\r\n                destHeight: 500,\r\n                success (res) {\r\n                    console.log(res)\r\n                    wx.shareAppMessage({\r\n                        title: \"Let's play Crossing Gaps!\",\r\n                        imageUrl: res.tempFilePath\r\n                    })\r\n                }\r\n            })\r\n        });\r\n    },\r\n\r\n    start () {\r\n        if (CC_WECHATGAME) {\r\n            window.wx.showShareMenu({withShareTicket: true});\r\n            this.tex = new cc.Texture2D();\r\n            window.sharedCanvas.width = 720;\r\n            window.sharedCanvas.height = 1280;\r\n            \r\n        }\r\n    },\r\n\r\n    _updateSubDomainCanvas () {\r\n       \r\n        if (window.sharedCanvas != undefined) {\r\n            this.tex.initWithElement(window.sharedCanvas);\r\n            this.tex.handleLoadedTexture();\r\n            this.display.spriteFrame = new cc.SpriteFrame(this.tex);\r\n        }\r\n    },\r\n\r\n    update (dt) {\r\n        this._updateSubDomainCanvas(dt);\r\n    }\r\n});\r\n"]}