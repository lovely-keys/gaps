{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\game.js"],"names":["cc","Class","extends","Component","properties","playerNum","isChange","coin_score","best_score","score","playerPrefab","default","type","Prefab","bridgePrefab","colPrefab","startCol","Node","startCol2","startFrame","SpriteFrame","coin","coin_label","Label","best_label","score_label","exp_label","gameover_label","game_over_win","over_string1","over_string2","gameLayer","Layout","shopIcon","achieveIcon","giftIcon","timer_label","shop_content","shop_frame","shop_gold_label","shop_close","shop","noCoinModal","achieve_gold_label","achieve_content","achieve_close","achieve","high_score","total_gaps","falls","redtotal","redhigh","gift","gift_close","gift_btn","a_modal","a_modal_close","a_modal_btn","addGold","onLoad","self","node","on","event","genLine","touches","getTouches","touchLoc","getLocation","y","startP","p","new_bridge","instantiate","setPosition","parent","bridge","runAction","sequence","rotateBy","callFunc","playerMove","modalOpen","active","saveData","isTimer","timeModal","children","getComponent","string","randCoins","Math","floor","random","giftCoins","showData","modal","now","Date","getTime","dueTime","achieveGold","gold","achieveNum","achieveStates","cal_HScore","totalGapNum","totalGapMinus","cal_TotalGaps","totalFallNum","totalFallMinus","cal_TotalFalls","totalRedHit","totalRedMinus","cal_TotalRed","cal_RedCombo","moveBy","delayTime","removeSelf","start","init","initStorage","getData","shopContent","firstPos","new_player","player","animClip","clipName","getMinPrice","checkShopState","combo","achieve_array","sizeStep","fColW","colStep","firstCol","secondCol","levelNum","prices","toString","update","dt","height","sign","delta","runTimer","maxStep","width","estTime","play","playAnim","stop","stopAnim","bridgeFall","gameEnd","endGame","move","fall","easeMove","EaseIn","createCol","abs","redComboNum","setPositionX","x","moveAll","moveCols","changeParam","newCol","moveTo","sPos","newcolStep","new_Col","ranW","ranX","anim","Animation","playersprite","Sprite","spriteFrame","sys","localStorage","getItem","undefined","userData","JSON","parse","best","skins","time","totalgap","totalfall","totalRed","redcombo","name","gaps","setItem","stringify","isD","console","log","diff","toMain","director","loadScene","i","frame1","index","NameStr","split","capitalizeFirstLetter","id","inArray","cur_frame","frame2","shopSkin","frame","cur_pos","getPosition","destroy","push","fontSize","minPrice","level","firstNum","newNum","money","checkAchieves","numAchieve","sum","achiveModal","data","charAt","toUpperCase","slice","needle","haystack","count","length","distance","fourHours","hours","minutes","seconds","pad","d"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        playerNum: 0,\r\n        isChange:false,\r\n        coin_score:100,\r\n        best_score:20,\r\n        score:0,\r\n        playerPrefab: {\r\n            default: [],\r\n            type:cc.Prefab\r\n        },\r\n        bridgePrefab: cc.Prefab,\r\n        colPrefab: cc.Prefab,\r\n        startCol:cc.Node,\r\n        startCol2:cc.Node,\r\n        startFrame: {\r\n            default:[],\r\n            type: cc.SpriteFrame\r\n        },\r\n        \r\n        coin: cc.Prefab,\r\n        coin_label: cc.Label,\r\n        best_label: cc.Label,\r\n        score_label: cc.Label,     \r\n        exp_label: cc.Label,\r\n        gameover_label: cc.Label,\r\n        game_over_win: cc.Node, \r\n        over_string1: cc.Label,\r\n        over_string2: cc.Label,\r\n        gameLayer:cc.Layout,\r\n        shopIcon: cc.Node,\r\n        achieveIcon: cc.Node,\r\n        giftIcon: cc.Node,\r\n        timer_label: cc.Label,\r\n        // shop variables\r\n        shop_content: cc.Node,\r\n        shop_frame:cc.Prefab,\r\n        shop_gold_label:cc.Label,        \r\n        shop_close: cc.Node,\r\n        shop: cc.Layout,\r\n        noCoinModal: cc.Prefab,\r\n        // achieve variables\r\n        achieve_gold_label:cc.Label,\r\n        achieve_content: cc.Node,\r\n        achieve_close: cc.Node,\r\n        achieve: cc.Layout,\r\n        high_score: cc.Node,\r\n        total_gaps: cc.Node,\r\n        falls: cc.Node,\r\n        redtotal: cc.Node,\r\n        redhigh: cc.Node,\r\n        // gift \r\n        gift: cc.Node,\r\n        gift_close:cc.Node,\r\n        gift_btn: cc.Node,\r\n        // achieve modal\r\n        a_modal: cc.Node,\r\n        a_modal_close: cc.Node,\r\n        a_modal_btn: cc.Node,\r\n        addGold: cc.Prefab,\r\n        \r\n        \r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        var self = this;\r\n        self.node.on(\"touchstart\", function(event) {\r\n            if(self.genLine === false) return;\r\n            var touches = event.getTouches();\r\n            var touchLoc = touches[0].getLocation();\r\n            if(touchLoc.y > 640){\r\n                self.isChange = false;\r\n                return;\r\n            }\r\n            // console.log(\"touchstart\");            \r\n            self.isChange = true;\r\n            var startP = cc.p(-244,-380);\r\n            var new_bridge = cc.instantiate(self.bridgePrefab);\r\n            new_bridge.setPosition(startP);\r\n            new_bridge.parent = self.gameLayer.node;\r\n            self.bridge = new_bridge; \r\n        });\r\n        self.node.on(\"touchend\", function(event) {\r\n            if(self.genLine === false) return;\r\n            if(self.isChange === false) return;\r\n            self.isChange = false;\r\n            self.bridge.runAction( cc.sequence(\r\n                    cc.rotateBy(0.5, 90),\r\n                    cc.callFunc(self.playerMove, self)\r\n                )\r\n            );\r\n            self.genLine = false;\r\n        });\r\n        self.shop_close.on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.genLine = true;\r\n            self.shop.node.active = false;\r\n            self.saveData();\r\n        });\r\n        self.shopIcon.on(\"touchend\", function(event) {\r\n            self.modalOpen = true;\r\n            self.genLine = false;\r\n            self.shop.node.active = true;\r\n        });\r\n        self.achieveIcon.on(\"touchend\", function(event) {\r\n            self.modalOpen = true;\r\n            self.genLine = false;\r\n            self.achieve.node.active = true;\r\n        });\r\n        self.achieve_close.on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.genLine = true;\r\n            self.achieve.node.active = false;\r\n            self.saveData();\r\n        });\r\n        self.giftIcon.on(\"touchend\", function(event) {\r\n            self.modalOpen = true;\r\n            if(self.isTimer == true) {\r\n                var timeModal = cc.instantiate(self.noCoinModal);\r\n                timeModal.children[0].getComponent(cc.Label).string = \"Next gift not ready yet\";\r\n                timeModal.parent = self.node;\r\n                return;\r\n            }            \r\n            self.genLine = false;\r\n            var randCoins = Math.floor(Math.random() * 10 + 10);\r\n            self.giftCoins = randCoins;\r\n            self.gift.children[1].children[1].getComponent(cc.Label).string = \"x\" + randCoins;\r\n            self.gift.active = true;\r\n        });\r\n        self.gift_close.on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.genLine = true;\r\n            self.gift.active = false;\r\n            self.saveData();\r\n        });\r\n        self.gift_btn.on(\"touchend\", function(event) {\r\n            self.modalOpen = true;\r\n            self.coin_score += self.giftCoins;\r\n            self.showData();\r\n            var modal = cc.instantiate(self.noCoinModal);\r\n            modal.children[0].getComponent(cc.Label).string = \"+\" + self.giftCoins + \" coins\";\r\n            modal.parent = self.node;\r\n            self.gift.active = false;\r\n\r\n            var now = new Date().getTime();\r\n            self.dueTime = now + (4 * 1000 * 60 * 60);\r\n            self.isTimer = true;\r\n            self.timer_label.node.active = true;\r\n            self.giftIcon.children[2].active = true;\r\n            self.giftIcon.children[1].active = false;\r\n            self.giftIcon.children[4].active = false;\r\n            self.genLine = true;\r\n        });\r\n        self.a_modal_close.on(\"touchend\", function(event) {\r\n            self.a_modal.active = false;\r\n        });\r\n        self.a_modal_btn.on(\"touchend\", function(event) {\r\n            self.coin_score  += self.achieveGold;\r\n            var gold = cc.instantiate(self.addGold);\r\n            gold.children[1].getComponent(cc.Label).string = \"+\" + self.achieveGold;      \r\n            switch (self.achieveNum) {\r\n                case \"0\":\r\n                    self.achieveStates[0] += 1;\r\n                    self.showData();\r\n                    self.cal_HScore();\r\n                    break;\r\n                case \"1\":\r\n                    self.totalGapNum -= self.totalGapMinus;\r\n                    self.achieveStates[1] += 1;\r\n                    self.showData();\r\n                    self.cal_TotalGaps();\r\n                    break;\r\n                case \"2\":\r\n                    self.totalFallNum -= self.totalFallMinus;\r\n                    self.achieveStates[2] += 1;\r\n                    self.showData();\r\n                    self.cal_TotalFalls();\r\n                    break;\r\n                case \"3\":\r\n                    self.totalRedHit -= self.totalRedMinus;\r\n                    self.achieveStates[3] += 1;\r\n                    self.showData();\r\n                    self.cal_TotalRed();\r\n                    break;\r\n                case \"4\":\r\n                    self.achieveStates[4] += 1;\r\n                    self.showData();\r\n                    self.cal_RedCombo();\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n                  \r\n            self.a_modal.active = false;            \r\n            gold.parent = self.node;            \r\n            gold.runAction(cc.sequence(\r\n                cc.moveBy(0.3, 0, 200),\r\n                cc.delayTime(0.5),\r\n                cc.removeSelf(true)\r\n            ));\r\n\r\n        });\r\n        self.shop.node.children[0].on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.shop.node.active = false;\r\n            self.genLine = true;\r\n        });\r\n        self.shop.node.children[1].on(\"touchend\", function(event) {\r\n        });\r\n        self.achieve.node.children[0].on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.achieve.node.active = false;\r\n            self.genLine = true;\r\n        });\r\n        self.achieve.node.children[1].on(\"touchend\", function(event) {\r\n        });\r\n        self.gift.children[0].on(\"touchend\", function(event) {\r\n            self.modalOpen = false;\r\n            self.gift.active = false;\r\n            self.genLine = true;\r\n        });\r\n        self.gift.children[1].on(\"touchend\", function(event) {\r\n        });\r\n        self.a_modal.children[0].on(\"touchend\", function(event) {\r\n            self.a_modal.active = false;\r\n        });\r\n        self.a_modal.children[1].on(\"touchend\", function(event) {\r\n        });\r\n    },\r\n\r\n    start () {\r\n        this.init();     \r\n        this.initStorage();\r\n        this.getData();           \r\n        this.showData();\r\n        \r\n        this.shopContent();\r\n        var firstPos = cc.p(-279, -297);\r\n        var new_player = cc.instantiate(this.playerPrefab[this.playerNum]);\r\n        new_player.setPosition(firstPos);\r\n        new_player.parent = this.gameLayer.node;\r\n        this.player = new_player;\r\n        this.animClip = this.clipName[this.playerNum];\r\n        this.getMinPrice();\r\n        this.checkShopState();\r\n        this.cal_HScore();\r\n        this.cal_TotalGaps();\r\n        this.cal_TotalFalls();\r\n        this.cal_TotalRed();\r\n        this.cal_RedCombo();\r\n    },\r\n\r\n    init() {\r\n        \r\n        this.score = 0;\r\n        this.achieveNum = 0;\r\n        this.combo = false;\r\n        this.modalOpen = false;\r\n        /// data from save\r\n        // this.totalGapNum = 100;\r\n        // this.totalFallNum = 300;\r\n        // this.totalRedHit = 300;\r\n        // this.redComboNum = 4;\r\n        // this.skins = [0,1,3,7]; \r\n        // this.dueTime = 1534777849552;\r\n        // this.achieveStates = [1, 1, 1, 1, 1];\r\n        // this.playerNum = 3;\r\n\r\n        this.achieve_array = [0,0,0,0,0];\r\n        this.genLine = true;\r\n        this.sizeStep = 5;\r\n        this.fColW = 100;\r\n        this.startCol.children[0].active = false;\r\n        this.colStep = 233;\r\n        this.isTimer = true;\r\n        this.firstCol = this.startCol;\r\n        this.secondCol = this.startCol2;\r\n        this.achieve.node.active = false;\r\n        this.clipName = [\"stickman_anim\", \"builder_clip\", \"boxer_clip\", \"batter_clip\", \"pirate_clip\", \"witch_clip\", \"magician_clip\", \"death_clip\", \"mummy_clip\", \"skater_clip\", \"cowboy_clip\", \"assassin_clip\"];\r\n        this.levelNum = [\"I\", \"Ⅱ\", \"Ⅲ\", \"IV\", \"Ⅴ\", \"Ⅵ\", \"Ⅶ\", \"Ⅷ\", \"Ⅸ\", \"Ⅹ\", \"XI\", \"XII\"];\r\n        this.prices = [0, 20, 100, 200, 200, 200, 300, 300, 400, 400, 600, 800, 1000]; \r\n        \r\n\r\n    },\r\n\r\n    showData() {\r\n        this.shop_gold_label.string = this.coin_score.toString();\r\n        this.achieve_gold_label.string = this.coin_score.toString();\r\n        this.coin_label.string = this.coin_score.toString();\r\n        this.best_label.string = \"Best: \" + this.best_score + \" Gaps\";\r\n        this.score_label.string = this.score.toString();\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.isChange){\r\n            if(this.bridge.height >= 750){\r\n                this.sign = -5;\r\n            }\r\n            if(this.bridge.height <= 0){\r\n                this.sign = 5;                \r\n            }\r\n            this.bridge.height += this.sign;\r\n        }else{\r\n\r\n        }\r\n        this.delta += dt;\r\n        if(this.delta < 1) return;\r\n        this.runTimer();\r\n        \r\n        this.delta = 0;\r\n        // var myWidth = this.bridge.width;\r\n    },\r\n\r\n    playerMove() {\r\n        var maxStep = this.colStep + this.secondCol.width;\r\n        if(this.bridge.height < this.colStep) {\r\n            var estTime = this.bridge.height/500;\r\n            var play = cc.callFunc(this.playAnim, this);\r\n            var stop = cc.callFunc(this.stopAnim, this);\r\n            var bridge = cc.callFunc(this.bridgeFall, this);\r\n            var gameEnd = cc.callFunc(this.endGame, this);\r\n            var move = cc.moveBy(estTime, this.bridge.height , 0);\r\n            var fall = cc.moveBy(0.5, 0, -200);\r\n            var easeMove = new cc.EaseIn( move, 2.0 );\r\n            this.player.runAction(cc.sequence(\r\n                play, easeMove, stop, bridge, fall, cc.removeSelf(true), gameEnd\r\n            ));\r\n        }else if(this.bridge.height > maxStep) {\r\n            var estTime = this.bridge.height/500;\r\n            var play = cc.callFunc(this.playAnim, this);\r\n            var stop = cc.callFunc(this.stopAnim, this);\r\n            var bridge = cc.callFunc(this.bridgeFall, this);\r\n            var gameEnd = cc.callFunc(this.endGame, this);\r\n            var move = cc.moveBy(estTime, this.bridge.height + 40 , 0);\r\n            var fall = cc.moveBy(0.5, 0, -200);\r\n            var easeMove = new cc.EaseIn( move, 2.0 );\r\n            this.player.runAction(cc.sequence(\r\n                play, easeMove, stop, bridge, fall, cc.removeSelf(true), gameEnd\r\n            ));\r\n        }else{\r\n            this.createCol();\r\n            this.score += 1;\r\n            this.totalGapNum += 1;\r\n            this.showData();\r\n            this.combo = false;\r\n            if(Math.abs(this.bridge.height - this.colStep - this.secondCol.width/2) <= 7 ) {\r\n                if(this.combo == true) this.redComboNum += 1;\r\n                var coin = cc.instantiate(this.coin);\r\n                coin.setPositionX(this.secondCol.x);\r\n                coin.parent = this.node;\r\n                coin.runAction(cc.sequence(\r\n                    cc.moveBy(0.5, 0, 200),\r\n                    cc.delayTime(0.5),\r\n                    cc.removeSelf(true)\r\n                ));\r\n                this.coin_score += 1;\r\n                this.showData();\r\n                this.checkShopState();\r\n                this.combo = true;\r\n            };\r\n            var estTime = maxStep/500;\r\n            var play = cc.callFunc(this.playAnim, this);\r\n            var stop = cc.callFunc(this.stopAnim, this);\r\n            var moveAll = cc.callFunc(this.moveCols, this);\r\n            var move = cc.moveBy(estTime, maxStep - 10 , 0);\r\n            var easeMove = new cc.EaseIn( move, 2.0 );\r\n            this.player.runAction(cc.sequence(\r\n                play, easeMove, stop, cc.delayTime(0.5), moveAll\r\n            ));\r\n            this.cal_TotalGaps();\r\n        }\r\n    },\r\n\r\n    moveCols() {        \r\n        var maxStep = this.colStep + this.secondCol.width -10;\r\n        this.secondCol.children[0].active = false;\r\n        this.firstCol.runAction(\r\n            cc.sequence(\r\n                cc.moveBy(0.5, -1 * maxStep, 0),\r\n                // cc.removeSelf(true),\r\n                cc.callFunc(this.changeParam, this)\r\n            )\r\n\r\n        );\r\n        this.bridge.runAction(cc.moveBy(0.5, -1 * maxStep, 0));\r\n        this.secondCol.runAction(cc.moveBy(0.5, -1 * maxStep, 0));\r\n        this.player.runAction(cc.moveBy(0.5, -1 * maxStep, 0));\r\n        this.newCol.runAction(cc.moveTo(0.5, this.sPos, -580));\r\n    },\r\n\r\n    changeParam() {\r\n        if(this.modalOpen == false) this.genLine = true;        \r\n        this.colStep = this.newcolStep;\r\n        this.firstCol = this.secondCol;\r\n        this.secondCol = this.newCol;\r\n    },\r\n\r\n    createCol() {\r\n        this.fColW = this.secondCol.width/2;\r\n        var new_Col = cc.instantiate(this.colPrefab);\r\n        var firstPos = cc.p(450,-580)\r\n        var ranW = (Math.random() * 120) + 40;\r\n        new_Col.width = ranW;\r\n        var ranX = Math.random() * (480 - ranW) - 100 + ranW/2;\r\n        this.newcolStep = ranX + 244 - ranW/2;\r\n        this.sPos = ranX;\r\n\r\n        new_Col.setPosition(firstPos);\r\n        new_Col.parent = this.gameLayer.node;\r\n        this.newCol = new_Col;\r\n    },\r\n\r\n    playAnim() {\r\n        var anim = this.player.getComponent(cc.Animation);\r\n        anim.play(this.animClip);\r\n    },\r\n\r\n    stopAnim() {\r\n        var anim = this.player.getComponent(cc.Animation);\r\n        anim.stop(this.animClip);\r\n        var playersprite = this.player.getComponent(cc.Sprite);\r\n        playersprite.spriteFrame = this.startFrame[this.playerNum];\r\n    },\r\n\r\n    bridgeFall() {\r\n        this.bridge.runAction(cc.rotateBy(0.5, 90));\r\n    },\r\n\r\n    getData() {\r\n        if(cc.sys.localStorage.getItem(\"userData\") != null && cc.sys.localStorage.getItem(\"userData\") != undefined) {\r\n            var userData = JSON.parse(cc.sys.localStorage.getItem(\"userData\"));\r\n            this.best_score = userData.best;\r\n            this.skins = userData.skins;\r\n            this.coin_score = userData.gold;\r\n            this.playerNum = userData.player;\r\n            this.dueTime = userData.time;\r\n            this.achieveStates = userData.achieve;\r\n            this.totalGapNum = userData.totalgap;\r\n            this.totalFallNum = userData.totalfall;\r\n            this.totalRedHit = userData.totalRed;\r\n            this.redComboNum = userData.redcombo;\r\n        }else{\r\n            this.best_score = 0;\r\n            this.skins = [0];\r\n            this.coin_score = 0;\r\n            this.playerNum = 0;\r\n            this.dueTime = new Date().getTime() + (4 * 1000 * 60 * 60);\r\n            this.achieveStates = [1,1,1,1,1];\r\n            this.totalGapNum = 0;\r\n            this.totalFallNum = 0;\r\n            this.totalRedHit = 0;\r\n            this.redComboNum = 0;\r\n        }\r\n    },\r\n\r\n    saveData() {\r\n        if(this.score > this.best_score) this.best_score = this.score;\r\n        var userData = {\r\n            name: \"user\",\r\n            gaps: this.score,\r\n            best: this.best_score,\r\n            gold: this.coin_score,\r\n            skins: this.skins,\r\n            player: this.playerNum,\r\n            time: this.dueTime,\r\n            achieve: this.achieveStates,\r\n            totalgap: this.totalGapNum,\r\n            totalfall: this.totalFallNum,\r\n            totalRed: this.totalRedHit,\r\n            redcombo: this.redComboNum,\r\n        };\r\n        cc.sys.localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n        cc.sys.localStorage.setItem(\"isData\", 1);\r\n    },\r\n\r\n    initStorage() {\r\n        var isD = cc.sys.localStorage.getItem(\"isData\");\r\n        if(isD == null || isD == 0 || isD == undefined){\r\n            console.log(\"local data init\");\r\n            var userData = {\r\n                name: \"user\",\r\n                gaps: 0,\r\n                best: 0,\r\n                gold: 0,\r\n                skins: [0],\r\n                player: 0,\r\n                time: new Date().getTime() + (4 * 1000 * 60 * 60),\r\n                achieve: [1,1,1,1,1],\r\n                totalgap: 0,\r\n                totalfall: 0,\r\n                totalRed: 0,\r\n                redcombo: 0,\r\n            };\r\n            cc.sys.localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n            cc.sys.localStorage.setItem(\"isData\", 1);\r\n            \r\n        }\r\n    },\r\n\r\n    endGame() {\r\n        this.totalFallNum += 1;\r\n        this.best_label.node.active = false;\r\n        this.score_label.node.active = false;\r\n        this.exp_label.node.active = false;\r\n        this.gameover_label.node.active = true;\r\n        this.game_over_win.active = true;\r\n        if(this.score <= this.best_score) {\r\n            var diff = this.best_score - this.score;\r\n            this.over_string1.string = diff + \" gaps left to beat high score:\";\r\n            this.over_string2.string = this.best_score + \" gaps\";\r\n        }else {\r\n            this.over_string1.string = \" Congatulations!\";\r\n            this.over_string2.string = \" Your best score is : \" + this.score;\r\n            this.best_score = this.score;\r\n        }\r\n        this.saveData();\r\n        this.node.runAction(cc.sequence(\r\n            cc.delayTime(2.5),\r\n            cc.callFunc(this.toMain, this)\r\n        ));\r\n        \r\n    },\r\n\r\n    toMain() {\r\n        // wx.postMessage({\r\n        //     msgType: 1,\r\n        //     score:this.score,\r\n        // })\r\n        cc.director.loadScene(\"main\");\r\n    },\r\n\r\n    shopContent() {\r\n       \r\n        for(var i = 0; i < 6; i++){\r\n            \r\n            var frame1 = cc.instantiate(this.shop_frame);\r\n            var index = i * 2;\r\n            frame1.setPosition(cc.p(-118, -144 - 292 * i));\r\n            frame1.parent = this.shop_content;\r\n            frame1.children[1].getComponent(cc.Sprite).spriteFrame = this.startFrame[index];\r\n            var NameStr = this.clipName[index].split(\"_\");\r\n            frame1.children[0].getComponent(cc.Label).string = this.capitalizeFirstLetter(NameStr[0]);\r\n            frame1.children[4].children[1].children[0].getComponent(cc.Label).string = this.prices[index].toString();\r\n            frame1.getComponent(\"shop\").id = index;\r\n            \r\n            if(this.inArray(index,this.skins)){\r\n\r\n                frame1.children[1].active = true;\r\n                frame1.children[5].active = false;\r\n                frame1.children[4].children[1].active = false;\r\n                frame1.children[4].children[0].active = true;\r\n            }\r\n            if(this.playerNum == index){\r\n                this.cur_frame = frame1;\r\n                frame1.children[4].active = false;\r\n                frame1.children[3].active = true;\r\n            }\r\n            \r\n            // right frame\r\n            var frame2 = cc.instantiate(this.shop_frame);\r\n            var index = i * 2 + 1;\r\n            frame2.setPosition(cc.p(118, -144 - 292 * i));\r\n            frame2.parent = this.shop_content;            \r\n            frame2.children[1].getComponent(cc.Sprite).spriteFrame = this.startFrame[index];\r\n            var NameStr = this.clipName[index].split(\"_\");\r\n            frame2.children[0].getComponent(cc.Label).string = this.capitalizeFirstLetter(NameStr[0]);\r\n            frame2.children[4].children[1].children[0].getComponent(cc.Label).string = this.prices[index].toString();\r\n            frame2.getComponent(\"shop\").id = index;\r\n            if(this.inArray(index,this.skins)){\r\n                frame2.children[1].active = true;\r\n                frame2.children[5].active = false;\r\n                frame2.children[4].children[1].active = false;\r\n                frame2.children[4].children[0].active = true;\r\n            }\r\n            if(this.playerNum == index){\r\n                this.cur_frame = frame2;\r\n                frame2.children[4].active = false;\r\n                frame2.children[3].active = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    shopSkin(frame, id) {\r\n        if(this.inArray(id, this.skins)){\r\n            this.playerNum = id;\r\n            this.cur_frame.children[4].active = true;\r\n            this.cur_frame.children[3].active = false;\r\n            this.cur_frame = frame;\r\n            frame.children[4].active = false;\r\n            frame.children[3].active = true;\r\n            var cur_pos = this.player.getPosition();\r\n            this.player.destroy();\r\n            var new_player = cc.instantiate(this.playerPrefab[id]);\r\n            new_player.setPosition(cur_pos);\r\n            new_player.parent = this.gameLayer.node;\r\n            this.player = new_player;\r\n            this.animClip = this.clipName[this.playerNum];\r\n        }else{\r\n            if(this.prices[id] <= this.coin_score){\r\n                this.coin_score = this.coin_score - this.prices[id];\r\n                this.showData();\r\n                frame.children[1].active = true;\r\n                frame.children[5].active = false;\r\n                frame.children[4].children[1].active = false;\r\n                frame.children[4].children[0].active = true;\r\n                this.cur_frame.children[4].active = true;\r\n                this.cur_frame.children[3].active = false;\r\n                this.cur_frame = frame;\r\n                frame.children[4].active = false;\r\n                frame.children[3].active = true;\r\n                this.skins.push(id);\r\n                var modal = cc.instantiate(this.noCoinModal);\r\n                modal.children[0].getComponent(\"cc.Label\").fontSize = 30;\r\n                modal.children[0].getComponent(\"cc.Label\").string = \"Successfully purchased!\";\r\n                modal.parent = this.shop.node;\r\n                this.playerNum = id;\r\n                var cur_pos = this.player.getPosition();\r\n                this.player.destroy();\r\n                var new_player = cc.instantiate(this.playerPrefab[id]);\r\n                new_player.setPosition(cur_pos);\r\n                new_player.parent = this.gameLayer.node;\r\n                this.player = new_player;\r\n                this.animClip = this.clipName[this.playerNum];\r\n                this.checkShopState();\r\n\r\n            }else{\r\n                var modal = cc.instantiate(this.noCoinModal);\r\n                modal.parent = this.shop.node;\r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n    checkShopState() {\r\n        if(this.coin_score > this.minPrice){\r\n            this.shopIcon.children[1].active = true;\r\n        }else{\r\n            this.shopIcon.children[1].active = false;\r\n        }\r\n    },\r\n\r\n    cal_HScore() {\r\n        this.high_score.children[8].getComponent(cc.Label).string = this.best_score;\r\n        var level = this.achieveStates[0];\r\n\r\n        var firstNum = 5;\r\n        for( var i=0 ;i<level-1; i++) {\r\n            if(i<3){\r\n                var newNum = firstNum * 2;\r\n            }else{\r\n                var newNum = firstNum + 20;\r\n            }\r\n            firstNum = newNum;\r\n        }\r\n        var money = (level-1) * 10;\r\n        if(level == 1) money = 5;\r\n        this.high_score.children[9].getComponent(cc.Label).string = \"/\" + firstNum;\r\n        this.achieveGold = money;\r\n        this.high_score.children[6].getComponent(cc.Label).string =  money;\r\n        this.high_score.children[0].getComponent(cc.Label).string =  this.levelNum[this.achieveStates[0]-1];\r\n        if(this.best_score >= firstNum) {\r\n            this.high_score.children[3].active = true;\r\n            var x = 0;\r\n            this.high_score.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[0] = 1;\r\n        }else{            \r\n            this.high_score.children[3].active = false;\r\n            var x = -240 + (this.best_score / firstNum) * 240;\r\n            this.high_score.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[0] = 0;\r\n        }\r\n        this.checkAchieves();\r\n    },\r\n\r\n    cal_TotalRed() {\r\n        this.redtotal.children[8].getComponent(cc.Label).string = this.totalRedHit;\r\n        var level = this.achieveStates[3];\r\n\r\n        var firstNum = 5;\r\n        for( var i=0 ;i<level-1; i++) {\r\n            if(i<4){\r\n                var newNum = firstNum * 2;\r\n                if(newNum == 10) newNum = 15;\r\n            }else{\r\n                var newNum = firstNum + 120;\r\n            }\r\n            firstNum = newNum;\r\n        }\r\n        var money = level * 5;\r\n        this.totalRedMinus = firstNum;\r\n        this.redtotal.children[9].getComponent(cc.Label).string = \"/\" + firstNum;\r\n        this.achieveGold = money;\r\n        this.redtotal.children[6].getComponent(cc.Label).string =  money;\r\n        this.redtotal.children[0].getComponent(cc.Label).string =  this.levelNum[this.achieveStates[3]-1];\r\n        if(this.totalRedHit >= firstNum) {\r\n            this.redtotal.children[3].active = true;\r\n            var x = 0;\r\n            this.redtotal.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[3] = 1;\r\n        }else{            \r\n            this.redtotal.children[3].active = false;\r\n            var x = -240 + (this.totalRedHit / firstNum) * 240;\r\n            this.redtotal.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[3] = 0;\r\n        }\r\n        this.checkAchieves();\r\n    },\r\n\r\n    cal_RedCombo() {\r\n        this.redhigh.children[8].getComponent(cc.Label).string = this.redComboNum;\r\n        var level = this.achieveStates[4];\r\n\r\n        var firstNum = 1;\r\n        for( var i=0 ;i<level-1; i++) {\r\n            firstNum = firstNum + 1;\r\n        }\r\n        var money = (level-1) * 10;\r\n        if(level == 1) money = 5;\r\n        this.redhigh.children[9].getComponent(cc.Label).string = \"/\" + firstNum;\r\n        this.achieveGold = money;\r\n        this.redhigh.children[6].getComponent(cc.Label).string =  money;\r\n        this.redhigh.children[0].getComponent(cc.Label).string =  this.levelNum[this.achieveStates[4]-1];\r\n        if(this.redComboNum >= firstNum) {\r\n            this.redhigh.children[3].active = true;\r\n            var x = 0;\r\n            this.redhigh.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[4] = 1;\r\n        }else{            \r\n            this.redhigh.children[3].active = false;\r\n            var x = -240 + (this.redComboNum / firstNum) * 240;\r\n            this.redhigh.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[4] = 0;\r\n           \r\n        }\r\n        this.checkAchieves();\r\n    },\r\n\r\n    cal_TotalGaps() {\r\n        this.total_gaps.children[8].getComponent(cc.Label).string = this.totalGapNum;\r\n        var level = this.achieveStates[1];\r\n\r\n        var firstNum = 25;\r\n        for( var i=0 ;i<level-1; i++) {\r\n            if(i<4){\r\n                var newNum = firstNum * 2;\r\n            }else{\r\n                var newNum = firstNum + 300;\r\n            }\r\n            firstNum = newNum;\r\n        }\r\n        var money = level * 5;\r\n        this.totalGapMinus = firstNum;\r\n        this.total_gaps.children[9].getComponent(cc.Label).string = \"/\" + firstNum;\r\n        this.achieveGold = money;\r\n        this.total_gaps.children[6].getComponent(cc.Label).string =  money;\r\n        this.total_gaps.children[0].getComponent(cc.Label).string =  this.levelNum[this.achieveStates[1]-1];\r\n        if(this.totalGapNum >= firstNum) {\r\n            this.total_gaps.children[3].active = true;\r\n            var x = 0;\r\n            this.total_gaps.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[1] = 1;\r\n            \r\n        }else{            \r\n            this.total_gaps.children[3].active = false;\r\n            var x = -240 + (this.totalGapNum / firstNum) * 240;\r\n            this.total_gaps.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[1] = 0;\r\n        }\r\n        this.checkAchieves();\r\n    },\r\n\r\n    cal_TotalFalls() {\r\n        this.falls.children[8].getComponent(cc.Label).string = this.totalFallNum;\r\n        var level = this.achieveStates[2];\r\n\r\n        var firstNum = 5;\r\n        for( var i=0 ;i<level-1; i++) {\r\n            if(i<3){\r\n                var newNum = firstNum * 2;\r\n            }else{                \r\n                var newNum = firstNum + 100;\r\n                if(i == 3) newNum = 100;\r\n            }\r\n            firstNum = newNum;\r\n        }\r\n        var money = level * 5;\r\n        this.totalFallMinus = firstNum;\r\n        this.falls.children[9].getComponent(cc.Label).string = \"/\" + firstNum;\r\n        this.achieveGold = money;\r\n        this.falls.children[6].getComponent(cc.Label).string =  money;\r\n        this.falls.children[0].getComponent(cc.Label).string =  this.levelNum[this.achieveStates[2]-1];\r\n        if(this.totalFallNum >= firstNum) {\r\n            this.falls.children[3].active = true;\r\n            var x = 0;\r\n            this.falls.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[2] = 1;\r\n        }else{            \r\n            this.falls.children[3].active = false;\r\n            var x = -240 + (this.totalFallNum / firstNum) * 240;\r\n            this.falls.children[11].children[0].setPositionX(x);\r\n            this.achieve_array[2] = 0;\r\n        }\r\n        this.checkAchieves();\r\n    },\r\n\r\n    checkAchieves() {\r\n        this.numAchieve = 0;\r\n        var sum = 0;\r\n        for( var i = 0; i < 5; i++) {\r\n            sum = sum + this.achieve_array[i];\r\n        }\r\n        \r\n        if(sum > 0) {\r\n            this.achieveIcon.children[1].active = true;\r\n        }else{\r\n            this.achieveIcon.children[1].active = false;\r\n        }\r\n    },\r\n\r\n    achiveModal(event, data) {\r\n        this.achieveNum = data;\r\n        this.genLine = false;\r\n        this.a_modal.active = true;\r\n        this.a_modal.children[1].children[1].getComponent(cc.Label).string = \"x\" + this.achieveGold;\r\n\r\n    },\r\n\r\n    getMinPrice(){\r\n        for(var i = 0; i < 12; i++)\r\n        {\r\n            if(this.inArray(i, this.skins)) continue;\r\n            this.minPrice = this.prices[i]; \r\n            break;\r\n        }\r\n    },\r\n\r\n    capitalizeFirstLetter(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    },\r\n\r\n    inArray(needle, haystack) {\r\n        var count=haystack.length;\r\n        for(var i=0;i<count;i++)\r\n        {\r\n            if(haystack[i]===needle){return true;}\r\n        }\r\n        return false;\r\n    },\r\n\r\n    runTimer() {\r\n        if(this.isTimer === false) return;\r\n        var now = new Date().getTime();\r\n        var distance = this.dueTime - now;\r\n        var fourHours = 4 * 1000 * 60 * 60;\r\n        if(distance < 0) {\r\n            this.isTimer = false;\r\n            this.timer_label.node.active = false;\r\n            this.giftIcon.children[2].active = false;\r\n            this.giftIcon.children[1].active = true;\r\n            this.giftIcon.children[4].active = true;\r\n        }\r\n        var hours = Math.floor(distance / (1000 * 60 * 60));\r\n        var minutes = Math.floor(distance % (1000 * 60 * 60) / (1000 * 60) );\r\n        var seconds = Math.floor((distance % (1000 * 60)) / 1000);\r\n        this.timer_label.string = this.pad(hours) + \":\" + this.pad(minutes) + \":\" + this.pad(seconds);\r\n    },\r\n\r\n    pad(d) {\r\n        return (d < 10) ? '0' + d.toString() : d.toString();\r\n    },\r\n\r\n});\r\n"]}